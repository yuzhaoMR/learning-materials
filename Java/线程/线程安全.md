# 线程安全

> 为什么有线程安全问题？

在多线程的环境下，线程是交替执行的，一般他们会使用多个线程执行相同的代码。如果在此相同的代码里边有着共享的变量，或者一些组合操作，我们想要的正确结果就很容易出现了问题。

> 线程安全定义

当多个线程访问某个类的时候，这个类始终能表现出正确的行为，那么这个类就是线程安全的！

> 简述解决线程安全性的办法

- 无状态(没有共享变量)
- 使用 final 使该引用变量不可变(如果该对象引用也引用了其他的对象，那么无论是发布或者使用时都需要加锁)
- 加锁(内置锁，显示 Lock 锁)
- 使用 JDK 为我们提供的类来实现线程安全(此部分的类就很多了)
  - 原子性（就比 count++操作，可以使用 AtomicLong 来实现原子性，那么在增加的时候就不会出差错了！)
  - 容器(ConcurrentHashMap 等等...)
  - .........
